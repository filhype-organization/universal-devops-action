name: Run Tests
description: 'Run tests for the project based on context'

inputs:
  test_options:
    description: 'Additional options for test commands'
    required: false
    default: ''
  java_version:
    description: 'Java version to use'
    required: false
    default: '21'
  node_version:
    description: 'Node.js version to use'
    required: false
    default: '22'
  build_options:
    description: 'Additional options for build commands'
    required: false
    default: ''

runs:
  using: composite
  steps:
    - name: Run Java Tests
      if: ${{ needs.get-context.outputs.java == 'true' }}
      uses: ./.github/actions/test/java-test
      with:
        test_options: ${{ inputs.test_options }}
        java_version: ${{ inputs.java_version }}

    - name: Run Angular Tests
      if: ${{ needs.get-context.outputs.angular == 'true' }}
      uses: ./.github/actions/test/angular-test
      with:
        build_options: ${{ inputs.build_options }}
        node_version: ${{ inputs.node_version }}
